import sys
from itertools import groupby

file = open(sys.argv[1], 'r')
lines = file.readlines()

start = lines[0]
int_start = int(start, 16)	#0x102000

# From Ghidra
point_addition_address = int_start + 0x4000	#0x102000 + 4000
point_double_address = int_start + 0x3000	#0x102000 + 3000
double_and_add_address = int_start + 0x5000	#0x102000 +5000

target_list = list()

for i in range(len(lines)-1):
	# print(lines[i])
	# parse lines
	int_line = int(lines[i], 16)
	# print(int_line)

	# Filtering
	if (int_line == point_addition_address or int_line == point_double_address or int_line == double_and_add_address):
		target_list.append(int_line)

compressed_list = [key for key, group in groupby(target_list)]

#print(len(int_lines_list))
#print(compressed_list)
#print(len(compressed_list)) 

operations = {
    point_double_address: lambda x: x * 2,
    point_addition_address: lambda x: x + 1
}

count = 1
for elem in compressed_list:
    if elem in operations:
        count = operations[elem](count)


print(hex(count))
